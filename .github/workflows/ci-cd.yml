name: ğŸ§ª Premier Workflow Simple + SAST

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  hello-world:
    runs-on: ubuntu-latest
    
    steps:
    # ---------- VOS Ã‰TAPES EXISTANTES ----------
    - name: ğŸ“¥ RÃ©cupÃ©rer le code
      uses: actions/checkout@v4
      
    - name: ğŸ‘‹ Bonjour GitHub Actions
      run: echo "Mon premier workflow GitHub Actions !"
      
    - name: ğŸ–¥ï¸ Infos systÃ¨me
      run: |
        echo "Date: $(date)"
        echo "SystÃ¨me: $(uname -a)"
        echo "RÃ©pertoire: $(pwd)"
        echo "Fichiers:"
        ls -la
        
    - name: âš™ï¸ Tester Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: ğŸ“¦ VÃ©rifier installation
      run: |
        echo "Node version: $(node --version)"
        echo "npm version: $(npm --version)"
        
    - name: ğŸš€ Tester mon API
      run: |
        echo "Installation des dÃ©pendances..."
        npm ci
        echo "Lancement des tests..."
        npm test
        echo "âœ… Tests rÃ©ussis !"
    
    # ---------- NOUVELLE Ã‰TAPE : SAST Semgrep ----------
    - name: ğŸ” SAST - Scan de sÃ©curitÃ© avec Semgrep
      uses: returntocorp/semgrep-action@v1
      with:
        config: .semgrep.yml
      continue-on-error: true  
        
    - name: ğŸ“Š Afficher les rÃ©sultats
      run: |
        echo "=== RÃ‰SULTATS SAST ==="
        echo "âœ… Scan de sÃ©curitÃ© terminÃ©"
        echo "ğŸ“ RÃ¨gles utilisÃ©es: .semgrep.yml"
        echo "ğŸ” DÃ©tection: console.log"
        
    # ---------- VOTRE Ã‰TAPE FINALE ----------
    - name: ğŸ‰ FÃ©licitations
      run: echo "Vous avez rÃ©ussi votre premier workflow GitHub Actions avec SAST !"